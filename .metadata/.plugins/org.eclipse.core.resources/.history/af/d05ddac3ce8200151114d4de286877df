
%term <int> NUMBER.
%nonterm <int> expr, <int> addendum, <int> factor.

program = statement SEMICOLON program | .
statement = PRINT out outlist.
outlist= COMMA out outlist  | .
out = expr %{ printf("%ld\n", $1); %}.

expr = addendum { PLUS addendum} 
%{
	$$ = 0;
 	for (RuleIter it(“1:2”, “1:2”); it.hasNext(); it++) {
		$$ += (*it);
	} 
%}.

addendum = factor { MULTIPLY factor }
%{
	$$ = 0;
 	for (RuleIter it(“1:2”, “1:2”); it.hasNext(); it++) {
		$$ *= *it;
	} 
%}.

factor = LPAREN expr RPAREN %{ $$ = $1:2 %}
 | NUMBER %{ $$ = $2:1 %}.
