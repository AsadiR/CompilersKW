#include <stdio.h>
#include <stdlib.h>
#include <string.h>



int main ()	{
	FILE *fp;
	if ((fp=fopen("grammar.txt", "r+"))==NULL) {
		printf("Cannot open file.");
		return 1;
	}
	char buf[1024];
	int i = 0;
	for (i = 0; i<1024; i++) {
		buf[i] = 0;
	}

	fread(buf, 1024*sizeof(char), 1024*sizeof(char), fp);

	printf("%s\n", buf);

	int tag ;
	YYSTYPE value;
	YYLTYPE coords ;
	yyscan_t scanner;
	struct Extra extra;
	long env[26];
	init_scanner(buf, &scanner, &extra);
	do
	{
		tag = yylex (&value, &coords, scanner );
		if ( tag != 0) {
			 printf("tag:%d,name:%s \n", tag, Domains[tag]);
			 if (tag == 3) printf("value:%s\n", value.value);
			 if (tag == 1 && value.num != NULL) printf("value:%ld\n", *(value.num));
		}
	} while ( tag != 0);
	destroy_scanner(scanner);
	return 0;
}
